## Register with APNs

### Request user permission to receive notifications

Receiving push notifications from APNs requires requesting permission from the user to receive notifications and then registering with the APNs service.

If you want **AWSPinpointPushNotificationsPlugin** to take care of these steps for you during configuration, you can pass an array of `UNAuthorizationOptions` when adding the plugin. For example, to request permission for badges, alerts, and sounds, you could add the plugin with the following:
```
try Amplify.add(
    plugin: AWSPinpointPushNotificationsPlugin(options: [.badge, .alert, .sound])
)
```

If you don't pass `UNAuthorizationOptions` when adding the plugin, you will be responsible for requesting notification permissions and registering with APNs as shown below.

<Callout>

The following is only required when you do not pass `UNAuthorizationOptions` when adding the plugin as described above.

</Callout>

<BlockSwitcher>
<Block name="iOS">

```swift
// Request user permission for notifications.
let options: UNAuthorizationOptions = [.badge, .alert, .sound]
let notificationsAllowed = try await UNUserNotificationCenter.current().requestAuthorization(
    options: options
)

if notificationsAllowed {
    // Register with Apple Push Notification service
    await UIApplication.shared.registerForRemoteNotifications()
}
```

</Block>
<Block name="macOS">

```swift
// Request user permission for notifications.
let options: UNAuthorizationOptions = [.badge, .alert, .sound]
let notificationsAllowed = try await UNUserNotificationCenter.current().requestAuthorization(
    options: options
)

if notificationsAllowed {
    // Register with Apple Push Notification service
    await NSApplication.shared.registerForRemoteNotifications()
}
```

</Block>
</BlockSwitcher>
